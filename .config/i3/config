# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

set $mod Mod4
set $mod2 Mod1+Mod4

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:monospace 8

# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
#font pango:DejaVu Sans Mono 8

# Before i3 v4.8, we used to recommend this one as the default:
# font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
# The font above is very space-efficient, that is, it looks good, sharp and
# clear in small sizes. However, its unicode glyph coverage is limited, the old
# X core fonts rendering does not support right-to-left and this being a bitmap
# font, it doesn’t scale on retina/hidpi displays.

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# start a terminal
bindsym $mod+Return exec "termite"
#bindsym $mod+Return exec "alacritty"
# Launch a floating terminal
for_window [title="termite_floating"] floating enable
bindsym $mod2+Return exec "termite --title=termite_floating"
#for_window [class="alacritty_floating"] floating enable
#bindsym $mod2+Return exec "alacritty --class alacritty_floating,alacritty_floating"

# kill focused window
bindsym $mod+Shift+q kill

# start rofi (a program launcher)
bindsym $mod+d exec "~/.rofi.sh"

# change focus
bindsym $mod+j focus left
bindsym $mod+k focus down
bindsym $mod+l focus up
bindsym $mod+odiaeresis focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+j move left
bindsym $mod+Shift+k move down
bindsym $mod+Shift+l move up
bindsym $mod+Shift+odiaeresis move right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# or you can move the whole workspace...
bindsym $mod2+j move workspace to output left
bindsym $mod2+Down move workspace to output down
bindsym $mod2+Up move workspace to output up
bindsym $mod2+odiaeresis move workspace to output right
# currently impossible to move up down shortcuts to home row due to screen locking shortcut

# split in horizontal orientation
bindsym $mod+h split h

# split in vertical orientation
bindsym $mod+v split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle
bindsym $mod2+f fullscreen toggle global

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
#bindsym $mod+d focus child

# switch to workspace
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10

bindsym $mod+F1 workspace 11
bindsym $mod+F2 workspace 12
bindsym $mod+F3 workspace 13
bindsym $mod+F4 workspace 14
bindsym $mod+F5 workspace 15
bindsym $mod+F6 workspace 16
bindsym $mod+F7 workspace 17
bindsym $mod+F8 workspace 18
bindsym $mod+F9 workspace 19
bindsym $mod+F10 workspace 20
bindsym $mod+F11 workspace 21
bindsym $mod+F12 workspace 22

bindsym $mod+t workspace Telegram
bindsym $mod+ssharp workspace Thunderbird
bindsym $mod+dead_acute workspace alfaview

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10

bindsym $mod+Shift+F1 move container to workspace 11
bindsym $mod+Shift+F2 move container to workspace 12
bindsym $mod+Shift+F3 move container to workspace 13
bindsym $mod+Shift+F4 move container to workspace 14
bindsym $mod+Shift+F5 move container to workspace 15
bindsym $mod+Shift+F6 move container to workspace 16
bindsym $mod+Shift+F7 move container to workspace 17
bindsym $mod+Shift+F8 move container to workspace 18
bindsym $mod+Shift+F9 move container to workspace 19
bindsym $mod+Shift+F10 move container to workspace 20
bindsym $mod+Shift+F11 move container to workspace 21
bindsym $mod+Shift+F12 move container to workspace 22

bindsym $mod+Shift+t move container to workspace Telegram
bindsym $mod+Shift+ssharp move container to workspace Thunderbird
bindsym $mod+Shift+dead_acute move container to workspace alfaview

# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart
# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

# resize window (you can also use the mouse for that)
bindsym $mod+r mode "resize"
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym j resize shrink width 10 px or 10 ppt
        bindsym k resize grow height 10 px or 10 ppt
        bindsym l resize shrink height 10 px or 10 ppt
        bindsym odiaeresis resize grow width 10 px or 10 ppt

        # same bindings, but for the arrow keys
        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

        # back to normal: Enter or Escape
        bindsym Return mode "default"
        bindsym Escape mode "default"
}



bindsym $mod2+x exec "xrandr --auto"
bindsym $mod2+y exec "autorandr -c"

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
bar {
        status_command i3status
	font xft:Monospace 9
	tray_output primary
}

# Remove borders
#for_window [class="^.*"] border pixel 0
default_border pixel
default_floating_border pixel
#hide_edge_borders smart
#exec --no-startup-id "picom --inactive-dim 0.2 --xrender-sync-fence"
#exec --no-startup-id "picom --xrender-sync-fence"
exec --no-startup-id "picom"
workspace_auto_back_and_forth yes

# Toggle screen lock (and blank screen)
#bindsym $mod2+l exec "xset s activate"
bindsym $mod2+l exec "sleep 0.2; xset dpms force off"
# Toggle suspend
bindsym $mod2+s exec "systemctl suspend"
# Toggle hibernate
# (deactivated in favor of 'hibernate' abbreviation)
#bindsym $mod2+h exec "systemctl hibernate"



# Control audio volume
bindsym XF86AudioMute exec "amixer -q sset Master toggle"
set $raise-volume "amixer -q sset Master 5%+,5%+ unmute"
set $lower-volume "amixer -q sset Master 5%-,5%- unmute"
bindsym XF86AudioRaiseVolume exec $raise-volume
bindsym $mod+i exec $raise-volume
bindsym XF86AudioLowerVolume exec $lower-volume
bindsym $mod+u exec $lower-volume

# TODO: make mute button for microphone working
#       implement bash script, to visualize use of microphone
#       and display its state in i3bar

exec --no-startup-id "pasystray"
exec --no-startup-id "pavucontrol"
for_window [class="Pavucontrol"] move scratchpad
#bindsym $mod+y [class="Pavucontrol"] scratchpad show
bindsym $mod+y scratchpad show

# Additional bindings for playerctl and XF86 media buttons
bindsym XF86AudioPlay exec "playerctl play-pause"
bindsym XF86AudioNext exec "playerctl next"
bindsym XF86AudioPrev exec "playerctl previous"
bindsym XF86HomePage exec "firefox"
bindsym XF86Mail workspace Thunderbird
bindsym XF86Explorer exec "nautilus"
#bindsym XF86Calculator exec "gnome-calculator"
bindsym XF86Calculator exec "qalculate-gtk"
for_window [title="Qalculate!"] floating enable

# universal keybindings to control music playback
bindsym $mod+p mode playerctl
mode "playerctl" {
	bindsym j exec "playerctl next"
	bindsym k exec "playerctl previous"
	bindsym p exec "playerctl play-pause"
	bindsym space exec "playerctl play-pause"
	bindsym u exec $lower-volume
	bindsym i exec $raise-volume

	bindsym Escape mode "default"
}

# Launch ARandR
bindsym XF86Display exec --no-startup-id "xrandr --auto"

# Insert a sudo in front
bindsym XF86Favorites exec "xdotool key Home; xdotool key s; xdotool key u; xdotool key d;xdotool key o; xdotool key space; xdotool key End"



# Change brightness
bindsym XF86MonBrightnessUp exec "brightnessctl s 10%+"
bindsym XF86MonBrightnessDown exec "brightnessctl s 10-%"

# A comfortable way to change screen brightness
bindsym $mod2+b mode brightness
mode "brightness" {
	bindsym 1 exec "brightnessctl s 10%"
	bindsym 2 exec "brightnessctl s 20%"
	bindsym 3 exec "brightnessctl s 30%"
	bindsym 4 exec "brightnessctl s 40%"
	bindsym 5 exec "brightnessctl s 50%"
	bindsym 6 exec "brightnessctl s 60%"
	bindsym 7 exec "brightnessctl s 70%"
	bindsym 8 exec "brightnessctl s 80%"
	bindsym 9 exec "brightnessctl s 90%"
	bindsym 0 exec "brightnessctl s 100%"

	bindsym Shift+1 exec "brightnessctl s 1%"
	bindsym Shift+2 exec "brightnessctl s 2%"
	bindsym Shift+5 exec "brightnessctl s 5%"
	bindsym Shift+0 exec "brightnessctl s 0%"

	bindsym Escape mode "default"
}

# blank screen
bindsym Mod1+F4 exec "~/.dim.sh"



# custom shortcuts for application launching
# Launch Firefox
bindsym $mod+b exec "firefox"
bindsym $mod+Shift+b exec "firefox --private-window"
# Launch Nautilus
bindsym $mod2+e exec "nautilus"
# Launch System-Monitor
bindsym Control+Shift+Escape exec "gnome-system-monitor"
# Launch Xournalpp
bindsym $mod+x exec "xournalpp"

# Switch with media workspace
bindsym $mod+o exec "~/.mediaspace.py"

# Enable workspace tabbing
#bindsym Mod1+Tab workspace next
#bindsym Mod1+Shift+Tab workspace prev
bindsym Mod1+Tab workspace back_and_forth

# (un)snooze notifications
bindsym $mod2+4 exec "dunstctl set-paused toggle"

# turn into media mode
#bindsym $mod2+v exec "~/.dim.sh"
bindsym $mod2+v exec "feh -F ~/.black.png"

# Screen Capture
# Flameshot
exec --no-startup-id "flameshot"
bindsym Print exec "flameshot gui"
# Capture a screenshot
bindsym $mod+Print exec "import -silent -window root ~/Pictures/screenshots/Screen_$(date +%F)_$(date +%R):$(date +%S).png"
# Make a screenshot of a single window
bindsym $mod+Shift+Print exec "sleep 0.2; import -frame ~/Pictures/screenshots/Screen_$(date +%F)_$(date +%R):$(date +%S).png"

# in case of multiple monitors
# TODO: IDEA: replace static monitor names with variables
workspace 1 output eDP1
#workspace "Telegram" output eDP1
workspace "Thunderbird" output eDP1
workspace "alfaview" output eDP1

workspace 3 output eDP1
workspace 5 output eDP1
workspace 7 output eDP1
workspace 9 output eDP1
workspace 11 output eDP1
workspace 13 output eDP1
workspace 15 output eDP1
workspace 17 output eDP1
workspace 19 output eDP1

workspace 2 output HDMI1
workspace 4 output HDMI1
workspace 6 output HDMI1
workspace 8 output HDMI1
workspace 10 output HDMI1
workspace 12 output HDMI1
workspace 14 output HDMI1
workspace 16 output HDMI1
workspace 18 output HDMI1
workspace 20 output HDMI1

assign [class="Thunderbird"] Thunderbird
#assign [class="Telegram"] Telegram
assign [class="alfaview"] alfaview

exec "sleep 10; thunderbird"
#exec "sleep 15; telegram-desktop"

# remove urgency from above created windows
exec "sleep 20; ~/.attention.sh"

# Start equalizer in background
# Disable cause no sound was available (2020-11-14)
exec "easyeffects --gapplication-service"

# start discord
exec --no-startup-id "discord --no-sandbox --start-minimized &"





# Prepare i3 startup
# Check for correct monitor layout
exec "sleep 5; autorandr -c"

# Merge resources and restore browser
#exec_always --no-startup-id "xrdb -merge ~/.Xresources"
exec_always --no-startup-id "~/.fehbg"
exec i3-msg 'workspace 1; exec firefox'

# Start notification-daemon
# Start Dunst (a notification-daemon)
exec --no-startup-id "/usr/bin/dunst"

# Start redshift
#exec --no-startup-id "redshift -P"
exec --no-startup-id "redshift -P -l 50:9"

# Enable libinput-gestures
#exec --no-startup-id "libinput-gestures-setup start"

# Prepare locker
exec "xss-lock -n /usr/lib/xsecurelock/dimmer -l -- $HOME/.lock.sh"
exec --no-startup-id "xset s 300 15"

# Prepare keymap
#exec_always --no-startup-id "setxkbmap de; sleep 1; xmodmap ~/.Xmodmap"
exec_always --no-startup-id "xset -b"
exec_always --no-startup-id "sleep 5; xkbcomb .keymap.xkb $DISPLAY"
# Background service for Anne
exec "~/.keymap.sh &"

# Fix annoying volume levels
exec --no-startup-id "~/.correctVolume.py"

# Prepare kdeconnect
#exec --no-startup-id "/usr/lib/kdeconnectd"
exec --no-startup-id "indicator-kdeconnect"

# Fixes for various application misbehavior
# fix for alfaview region share
# TODO: fix background darkening
for_window [title="alfaview - Region share"] floating enable
# fix for teams
for_window [title="Microsoft Teams Notification"] floating enable
for_window [title="Skype"] floating enable
# fix for nautilus
exec dbus-update-activation-environment --systemd DBUS_SESSION_BUS_ADDRESS DISPLAY XAUTHORITY
# enable "normal" mode for java ui learning in DHBW
for_window [instance="de-dhbwka-*"] floating enable border normal
# enable floating mode by default for sound recorder
for_window [class="Gnome-sound-recorder"] floating enable
# enable floating mode for flameshot open with
for_window [class="flameshot" title="Open With"] floating enable

# wacom setup
# Intuos
#exec --no-startup-id "sleep 10; ~/.wacom/wsetup.sh; ~/.wacom/hdmi.sh"
# Deco
exec --no-startup-id "~/.wacom/deco/setup.sh"

exec --no-startup-id "~/.benis.sh"
